This server is dedicated to collaboratively writing stories into blockchains!

The stories are written one chapter at a time. The participants can take two roles: writer and miner. The writers each write their version of the next chapter of the story and share it with the community. Then the miners pick one of the chapters and try to validate it. I.e. they append it to the blockchain. This represents a large amount of computer work. If the chapter is popular, then many miners will try to add it. It will have a high chance of being quickly validated. This is important because the first contribution to be validated is (modulo some technicalities) accepted as the true official chapter. In this sense, the mining process is like a race. The fastest miner gets to fix the new chapter for everyone. Once a chapter is validated, then the authors can start writing the next chapter to submit to the miners for validation. This goes on forever or until the story ends.

On this server we share the files necessary to write such stories. The writers upload their chapter submissions to <#1133791244858966096>. The miners download them, validate them and upload the updated story to <#1133791437637558332>. Writing a story in this way has original and interesting features:
- The story is cryptographically immutable. It's only possible to change the story by writing the next chapters and taking it somewhere interesting. The past cannot be changed.
- Anyone can pick up the story and add to it. The only requirement is to be able (through good writing) to convince the miners to validate your chapter.
- There can be no discussion about what version of the story is canon or who is an acceptable author. All this is cryptographically fixed by a precise set of rules.
- It teaches us about blockchains.
- It's fun and interesting to mix and match unrelated ideas.

#split

I wrote a full implementation of the blockchain. The necessary tools together with a detailed (and technical) description are available in the github repository: https://github.com/sethyvenatem/blockchain_story. The core of this implementation is composed of three different python scripts that construct and assemble the different elements of the blockchain.

#splitChapter signature#split

The first script, [**chapter_signature.py**](https://github.com/sethyvenatem/blockchain_story/blob/main/python_implementation/chapter_signature.py) takes the chapter written by an author and adds a digital signature on top of it. This ensures that nobody can impersonate an author (after their first contribution). A new block from an author that already contributed to the story will not be valid if it does not have the same public key as in the author's previous contribution(s) and if the digital signature is consistent. The latter can only be performed if the author is in possession of their private key (stored in a key file in their computer or generated by [**chapter_signature.py**](https://github.com/sethyvenatem/blockchain_story/blob/main/python_implementation/chapter_signature.py) if absent) that matches the public key. Once, the chapter is signed, the script creates a \*.json file and places it in the working directory. This file must then be manually uploaded to <#1133791244858966096> so that the miners can get it.

#splitMining#split

The second script, [**mining.py**](https://github.com/sethyvenatem/blockchain_story/blob/main/python_implementation/mining.py) appends signed chapters at then of already validated stories. The miners choose their favourite chapter submission and use this script to add it at the end of the story. The script performs a lot of computer work and will run until the chapter is validated. This can take a looong time. Since the mining process is random, the chances of rapidly validating a chapter increase with the total mining time. Many miners working on a given chapter means a high chance of this chapter being validated first. The miners are expected to notify the community immediately (through a webhook or by uploading the newly validated story as a \*.json file) if the script terminates. That way, the other miners can stop mining and avoid waisting computer work. This script is called with the file names of the up-until-now validated story, the digitally signed chapter data as well as the name of the miner. The two files must be placed in the same directory as [**mining.py**](https://github.com/sethyvenatem/blockchain_story/blob/main/python_implementation/mining.py). Upon completion of the validation process, the miner is offered the possibility to send the newly validated story (placed in a \*.json file) directly to <#1133791437637558332> (webhook). They can also upload the file manually.

#splitChecks#split

The third script, [**checks.py**](https://github.com/sethyvenatem/blockchain_story/blob/main/python_implementation/checks.py) verifies that a given story file is correctly validated and follows the rules of the story. Moreover, (and if all the checks are passed) the scripts creates a \*.txt file with the content of the story in an easily readable form. It is run with the name of the file to check as argument. The selected file must be placed in the same directory as [**checks.py**](https://github.com/sethyvenatem/blockchain_story/blob/main/python_implementation/checks.py). This script can check chapter data, digitally signed chapter data, individual blocks and full (although possibly unfinished) stories.

#split

The detailed rules of each individual story are set in the genesis block (chapter 0). The different field names make these rules quite self-explanatory. Everybody is invited to take a look at the first block of any story they want to contribute to. See [genesis_block.json](https://github.com/sethyvenatem/blockchain_story/blob/main/python_implementation/genesis_block.json) in the github repository for an example.

The scripts described above can be either run directly with a command or through an interface, [**gui.py**](https://github.com/sethyvenatem/blockchain_story/blob/main/python_implementation/gui.py), that provides buttons to push and forms to fill.

#splitGUI#split

The interface [**gui.py**](https://github.com/sethyvenatem/blockchain_story/blob/main/python_implementation/gui.py) is a separate python script that can call any of the three scripts described above. With this script, chapters are digitally signed by directly typing (or pasting) the chapter content into a form. Chapters are mined by selecting a signed chapter and story (from a list compiled from the **files in the working directory**) and typing in a miner name. There is also a check-box to tick if the user wants the validated chapter to be automatically sent to <#1133791437637558332>. Story files are checked and automatically displayed by selecting a file from a list (compiled from the **files in the working directory**).

#split

To set up the system, users must copy the scripts into their computer and install python. The following steps must be followed only once:
- First download the files described above. Go to the [github repository](https://github.com/sethyvenatem/blockchain_story) and download everything to your computer. If you don't change anything, the working directory is called 'python_implementation'.
- Second, download and install python from here: https://www.python.org/downloads/.
- Install the necessary packages using the command line of your computer.

#splitPackages installation#split

Windows:
- Open the working folder, then type `cmd` into the folder path at the top of the window to open a command prompt.
- Paste in: `py -m pip install -r requirements.txt` and type enter.

MacOs:
- right-click on the working directory.
- go to 'services'
- click 'New Terminal at Folder' or 'New iTerm2 Window Here'
- Paste in: `pip install -r requirements.txt` or `pip3 install -r requirements.txt` and then type enter.

Linux:
- right-click on an empty space in the working directory and then select Open In Terminal.
- Paste in: `pip install -r requirements.txt` or `pip3 install -r requirements.txt` and then type enter.

#split

To use the system, open a terminal window in the working directory and run the python script [**gui.py**](https://github.com/sethyvenatem/blockchain_story/blob/main/python_implementation/gui.py).

#splitRunning the interface#split

Windows:
- Open the working folder, then type cmd into the folder path at the top of the window to open a command prompt.
- Paste in: `py gui.py` and type enter.

MacOs:
- right-click on the working directory.
- go to 'services'
- click 'New Terminal at Folder' or 'New iTerm2 Window Here'
- Paste in: `python gui.py` or `python3 gui.py` and then type enter.

Linux:
- right-click on an empty space in the working directory and then select Open In Terminal.
- Paste in: `python gui.py` or `python3 gui.py` and then type enter.

#splitRecommandations#split

For the story writing to go on smoothly it is recommended that the miners only attempt to add a chapter to the earliest version of the longest validated story. If a miner use another version, then it is highly probable that another miner will validate their block first because they started mining earlier. Moreover, when there are multiple validated stories, then the validation date is used to decide which story is valid. Attempting to append a block to an invalid story will most likely lead to another invalid story. This involves pointless work for the miner's computer and waisted energy. If there are multiple versions of the validated story that all have the same number of chapters, then pick the oldest one! Each block has a story\_runtime\_seconds field that can be checked to be sure. Pick the story with the smallest story run-time. The mining date of the last block is also included at the end of the file name.

Authors should proofread their submissions and run them through a spell-checker. Indeed, once a block is validated, it becomes impossible to change. Typos will be there forever!

The mining procedure is like repeatedly throwing many dices until all-sixes come out. There is no memory of what was tried and no progress. It's all about trying long enough until the right combination comes out. It is therefore completely ok to interrupt a computer engaged in mining and start again later. No progress will be lost and the chances of validating a block will not be reduced. The only thing that matters is the total amount of time that the computer is working.